<section class="login-page">
	<div class="login-panel">
		<div>
			<p class="eyebrow">Espace admin</p>
			<h1>Connexion sécurisée</h1>
			<p class="lead">
				Accédez aux contenus pour publier, ajuster et suivre vos projets.
			</p>
		</div>

		<form class="login-form" [formGroup]="loginForm" (ngSubmit)="submitForm()">
			<div class="field">
				<label for="email">Email</label>
				<input id="email" type="email" formControlName="email" autocomplete="email"
					[attr.aria-describedby]="showError('email') ? 'email-error' : null" />
				@if (showError('email')) {
					<p id="email-error" class="error">Email invalide.</p>
				}
			</div>

			<div class="field">
				<label for="password">Mot de passe</label>
				<div class="input-with-toggle">
					<input
						id="password"
						[type]="showPassword() ? 'text' : 'password'"
						formControlName="password"
						autocomplete="current-password"
						[attr.aria-describedby]="showError('password') ? 'password-error' : null"
					/>
					<button
						type="button"
						class="toggle-password"
						(click)="togglePasswordVisibility()"
						[attr.aria-pressed]="showPassword()"
						[attr.aria-label]="showPassword() ? 'Masquer le mot de passe' : 'Afficher le mot de passe'"
					>
						@if (showPassword()) {
							<span>Masquer</span>
						} @else {
							<span>Afficher</span>
						}
					</button>
				</div>
				@if (showError('password')) {
					<p id="password-error" class="error">Mot de passe requis (8 caractères min.).</p>
				}
			</div>

			<button class="button primary" type="submit" [disabled]="loading()">
				@if (loading()) {
					<span>Connexion…</span>
				} @else {
					<span>Se connecter</span>
				}
			</button>

			@if (errorMessage()) {
				<p class="error" role="alert">{{ errorMessage() }}</p>
			}
		</form>
	</div>
</section>
