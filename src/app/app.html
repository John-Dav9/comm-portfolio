<a class="skip-link" href="#main-content">Aller au contenu</a>

<div class="app-shell">
  @if (previewMode()) {
    <div class="preview-bar" role="status" aria-live="polite">
      <div class="container preview-content">
        <p>Preview live actif</p>
        <div class="preview-actions">
          <a class="button ghost" routerLink="/admin/content">Retour à l’admin</a>
          <button class="button primary" type="button" (click)="exitPreview()">Quitter le preview</button>
        </div>
      </div>
    </div>
  }
  <header class="site-header">
    <div class="container header-content">
      <div class="brand">
        @if (header().brandLogoUrl) {
          <img class="brand-logo" [src]="header().brandLogoUrl" [alt]="header().brandLogoAlt" />
        }
        <p class="brand-title">{{ header().brandTitle }}</p>
        <p class="brand-subtitle">{{ header().subtitle }}</p>
      </div>

      <div class="lang-switch" role="group" aria-label="Langue">
        <button
          type="button"
          class="lang-btn"
          [class.is-active]="currentLang() === 'fr'"
          (click)="setLang('fr')">
          FR
        </button>
        <button
          type="button"
          class="lang-btn"
          [class.is-active]="currentLang() === 'en'"
          (click)="setLang('en')">
          EN
        </button>
      </div>

      <button
        class="nav-toggle"
        type="button"
        (click)="toggleMenu()"
        [attr.aria-expanded]="isMenuOpen()"
        aria-controls="primary-navigation">
        <span class="sr-only">Ouvrir le menu</span>
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>

      <nav
        id="primary-navigation"
        class="site-nav"
        [class.is-open]="isMenuOpen()"
        aria-label="Navigation principale">
        <div class="nav-lang" role="group" aria-label="Langue">
          <button
            type="button"
            class="lang-btn"
            [class.is-active]="currentLang() === 'fr'"
            (click)="setLang('fr')">
            FR
          </button>
          <button
            type="button"
            class="lang-btn"
            [class.is-active]="currentLang() === 'en'"
            (click)="setLang('en')">
            EN
          </button>
        </div>
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" (click)="closeMenu()">{{ header().nav.home }}</a>
        <a routerLink="/about" routerLinkActive="active" (click)="closeMenu()">{{ header().nav.about }}</a>
        <a routerLink="/projects" routerLinkActive="active" (click)="closeMenu()">{{ header().nav.projects }}</a>
        <a routerLink="/blog" routerLinkActive="active" (click)="closeMenu()">{{ header().nav.blog }}</a>
        <a routerLink="/contact" routerLinkActive="active" (click)="closeMenu()">{{ header().nav.contact }}</a>
        <a routerLink="/admin/login" class="nav-cta" (click)="closeMenu()">{{ header().nav.admin }}</a>
      </nav>
    </div>
  </header>

  <main id="main-content" class="site-main">
    <div class="container">
      <router-outlet />
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-content">
      <p>{{ footer().copyright }} {{ footer().rights }}</p>
      <div class="footer-links">
        <a [href]="'mailto:' + footer().email">{{ footer().email }}</a>
        <span aria-hidden="true">•</span>
        <a routerLink="/contact">{{ footer().contactLabel }}</a>
        <span aria-hidden="true">•</span>
        <a routerLink="/privacy">Confidentialité</a>
        <span aria-hidden="true">•</span>
        <a routerLink="/terms">Conditions</a>
        <span aria-hidden="true">•</span>
        <a routerLink="/cookies">Cookies</a>
      </div>
    </div>
  </footer>
</div>
